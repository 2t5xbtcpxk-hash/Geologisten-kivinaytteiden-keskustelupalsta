<!DOCTYPE html>
<html>

{% extends "top_of_all_pages.html" %}

{% block content %}
<link rel="stylesheet" href="/static/main.css">

<body>
  {% if session.user_id %}

    <h2>Lisättyjä näytteitä</h2>
    
    {% for thread in threads %}
      <div class="thread">
        <p>
          <a style="color:rgb(226, 226, 226)" href="/thread/{{ thread.id }}">{{ thread.title }}</a>
          <br />
          <p>Kivityyppi: {{ thread.rocktype }}</p>
          <p>Kivilaji: {{ thread.rock }}</p>
          {% if thread.total == 0 %}
            <p>Ei vielä kommentteja</p>
          {% else %}
            {% if thread.total == 1 %}
              {{ thread.total }} kommentti
            {% else %}
              {{ thread.total }} kommenttia
            {% endif %}
          {% endif %}
        </p>
        {% if thread.user_id == session.user_id %}
        <p>
          <a style="color:rgb(226, 226, 226)" href="/edit_thread/{{ thread.id }}">Muokkaa</a> |
          <a style="color:rgb(226, 226, 226)" href="/remove_thread/{{ thread.id }}">Poista</a>
        </p>
        {% endif %}
      </div>
    
    {% endfor %}

    <p class="page-nav">
      <a style="color:rgb(226, 226, 226)" href="/{{ page - 1 }}">&lt;</a>
      Sivu {{ page }}/{{ page_count }}
      <a style="color:rgb(226, 226, 226)" href="/{{ page + 1 }}">&gt;</a>
    </p>

    <div class="thread">
      <h2>Uusi lisäys</h2>

      <form action="/new_thread" method="post" enctype="multipart/form-data">
        <p>
          Näytetunnus: <br />
          <input type="text" name="title" maxlength="100" required/> <br />
          Max. 100 merkkiä
        </p>
        <p>
          Kivityyppi: <br />
          <select name="rock_type" required>
              <option value="1">Magmakivi</option>
              <option value="2">Metamorfinen kivi</option>
              <option value="3">Sedimenttikivi</option>
          </select>     
        </p>
        <p>
          Pituuspiiri koordinaatti (YKJ): <br />
          <input type="number" step=".02" name="longitude" maxlength="10" required></input> <br />
          Max. 10 merkkiä
        </p>
        <p>
          Leveyspiiri koordinaatti (YKJ): <br />
          <input type="number" step=".02" name="latitude" maxlength="10" required></input> <br />
          Max. 10 merkkiä
        </p>
        <p>
          Näytteen keräyspäivämäärä: <br />
          <input type="date" name="collection_date" max="{{ current_date }}" required />
        </p>
        <p>
          Kivilaji: <br />
          <textarea name="rock" maxlength="50" required></textarea> <br />
          Max. 50 merkkiä
        </p>
        <p>
          Kuvaus: <br />
          <textarea name="comment" rows="5" cols="40" maxlength="1000" required></textarea> <br />
          Max. 1000 merkkiä
        </p>
        <p>
          Kuva: <input type="file" name="image" accept=".jpg" required/>
        </p>
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
        <input type="submit" value="Lisää näyte" />
      </form>
    </div>

  {% else %}
    

    <h2>Lisättyjä näytteitä</h2>

    {% for thread in threads %}
      <div class="thread">
        <p>
          <a style="color:rgb(226, 226, 226)" href="/thread/{{ thread.id }}">{{ thread.title }}</a>
          <br />
          <p>Kivityyppi: {{ thread.rocktype }}</p>
          <p>Kivilaji: {{ thread.rock }}</p>
          {% if thread.total == 0 %}
            <p>Ei vielä kommentteja</p>
          {% else %}
            {% if thread.total == 1 %}
              {{ thread.total }} kommentti
            {% else %}
              {{ thread.total }} kommenttia
            {% endif %}
          {% endif %}
        </p>

      </div>
    {% endfor %}

    <p class="page-nav">
      <a style="color:rgb(226, 226, 226)" href="/{{ page - 1 }}">&lt;</a>
      Sivu {{ page }}/{{ page_count }}
      <a style="color:rgb(226, 226, 226)" href="/{{ page + 1 }}">&gt;</a>
    </p>

    <p>
      Kirjaudu sisään tai luo tunnus lisätäksesi näytteitä.
    </p>
  {% endif %}
</body>

{% endblock %}
</html>


